# 파일 시스템

상태: 완료
최종 편집 일시: 2021년 6월 11일 오전 11:45

- **목차**

# 파일과 파일 시스템

 **파일 시스템**은 파일을 보관하고 관리하는 **파일 관리자**를 두어 저장장치의 전체 관리를 하는 시스템입니다.

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled.png)

- 블록 : 저장장치에서 사용하는 가장 작은 단위로, 한 블록에 주소 하나가 할당

       → 블록의 크기는 시스템마다 다른데, 작게 설정하면 내부 단편화 현상이 줄어들지만 파일이 

           여러 블록으로 나뉘어  파일 입출력 속도가 느려짐

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%201.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%201.png)

                                 실행 파일 : 운영체제가 메모리로 가져와 CPU를 이용하여 작업을 하는 파일

- 연결 프로그램 : 데이터 파일을 더블 클릭하면 실행되는 응용 프로그램

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%202.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%202.png)

- 파일 헤더 : 파일 테이블에서 관리, 파일의 이름, 종류, 크기, 시간, 접근 권한 등의 일반적인 내용과 **파일이 저장 장치의 몇 번째 블록에 있는지**의 정보가 있음
- 고유 헤더 : 파일의 버전 번호, 크기, 특수 정보 등 **응용 프로그램이 필요로 하는 정보**가 있음

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%203.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%203.png)

## 파일 구조

- **순차(sequential) 파일 구조**

    파일 내용이 하나의 긴 줄로 늘어선 형태

    - 장점 : 저장 공간 낭비가 거의 없음, 구조가 단순함, 순서대로 읽거나 저장할 때의 속도가 빠름
    - 단점 : 새로운 데이터 삽입 또는 삭제 시 속도가 느림, 데이터 검색에 적당하지 않음
- **인덱스(index) 파일 구조**

    순차 파일 구조 + 인덱스 테이블 → 순차 접근과 직접 접근 가능

    현대의 파일 시스템으로 **파일을 저장**할 때는 순차 파일 구조, **파일에 접근**할 때는 인덱스 테이블을 보고 원하는 파일에 직접 접근 

- **직접(direct) 파일 구조**

    저장하려는 데이터의 특정 값에 어떤 관계를 정의하여 물리적인 주소로 바로 변환하는 파일 구조,

    **해시 함수**를 사용하여 직접 접근 가능

    - 장점 : 해시 함수를 이용하여 주소를 변환하기 때문에 데이터 접근이 매우 빠름
    - 단점 : 적당한 해시 함수 구하는 것이 어려움, 저장 공간 낭비

# 디렉터리의 구조

 디렉터리(폴더)는 관련있는 파일을 하나로 모아 놓은 곳으로, 하나의 디렉터리에는 여러 개의 파일과 자식 디렉터리가 존재합니다.

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%204.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%204.png)

                                 루트 디렉터리: 최상위에 있는 디렉터리

- 절대 경로 : **루트 디렉터리를 기준**으로 파일의 위치를 나타내는 방식
- 상대 경로 : **현재 있는 위치를 기준**으로 파일의 위치를 표시하는 방식

## 디렉터리 구조

- **1단계 디렉터리 구조**

    루트 디렉터리에 새로운 디렉터리를 만들 수 있지만, 디렉터리 안에 자식 디렉터리를 만들 수 없음

- **다단계 디렉터리 구조**

    단계 확장에 제약이 없고, 디렉터리 파일과 디렉터리를 둘 다 저장할 수 있음

- **바로가기 링크를 포함한 디렉터리 구조**

    **순환**이 있는 그래프 구조

- 마운트 : 여러 개의 파티션을 통합하는 명령어

       → 매킨토시 : 사용자가 컴퓨터에 디스크를 집어넣는 것

       → Unix환경 : 논리적으로 디스크와 디렉터리를 붙이는 것

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%205.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%205.png)

# 디스크 파일 할당

- **연속 할당**

    파일을 구성하는 데이터를 디스크상에 **연속적으로 배열**하는 간단한 방식

    →실제로 사용하지는 않음

- **불연속 할당**

    비어 있는 블록에 데이터를 **분산하여 저장**하고 이에 관한 정보를 파일 시스템이 관리하는 방식

    - **연결 할당** : 파일에 속한 데이터를 **연결 리스트**로 관리하는 방식

           → 중간에 연결이 끊어지면 안됨

           → 체인으로 연결한 것처럼 보여 '체인 할당'이라고도 함

    - **인덱스 할당** : 테이블의 블록 포인터가 데이터의 인덱스를 담고 있는 **인덱스 블록**을 연결

           → 인덱스 블록 : 실제 데이터의 위치에 관한 정보를 순서대로 보관

           → 인덱스 블록을 연결하는 간접 인덱스 블록을 만들어 나가면 테이블 **무한히 확장** 가능

## 디스트의 빈 공간 관리

 디스크의 내부 단편화를 줄이고 빈 공간을 효율적으로 관리하기 위해 파일 시스템은 빈 블록의 정보만 모아놓은 **빈 공간 리스트**를 유지합니다.

- 파일 테이블의 헤더를 삭제하고 사용했던 블록을 빈 공간 리스트에 등록 → **파일이 삭제** 됨
- 데이터를 빈 공간 리스트에 **새롭게 넣을 때** 리스트에 있던 블록 중 **맨 앞에 있는 블록**에 할당

# 유닉스 파일 시스템

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%206.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%206.png)

                                   파일 종류 : - (일반 파일), d (디렉터리), l (링크)

- **Chmod(Change Mode)** : 접근 패턴을 변경할 때 사용하는 명령어

![%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%207.png](%E1%84%91%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20%E1%84%89%E1%85%B5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A6%E1%86%B7%20f5ce815451104ccc9fe45623c68b5873/Untitled%207.png)

                               chmod 명령을 이용하여 살리고 싶은 숫자 모두 더함   ex) chmod 777 test.c

# 참고🔗

- 쉽게 배우는 운영체제(한빛 아카데미) - 11장