# 입출력 시스템과 저장장치

작성일시: 2021년 6월 11일 오전 10:02
최종 편집일시: 2021년 6월 11일 오전 11:16

# 01. 입출력 시스템

입출력 장치 = 주변장치

저속 주변 장치 : 메모리와 주변장치 사이에 오고 가는 데이터의 양이 적어 데이터 전송률이 낮은 장치

고속 주변 장치 : 메모리와 주변장치 사이에 대용량의 데이터가 오고 가 데이터 전송률이 높은 장치


## 입출력 버스의 구조

---

### 초기

![Untitled 1](https://user-images.githubusercontent.com/52151533/121624809-2e4ec800-caad-11eb-908a-28fa2c2fe9c7.png)



모든 장치가 하나의 버스로 연결. 

CPU가 작업을 진행하다 입출력 명령을 만나면 직접 입출력장치에서 데이터를 가져오는 "폴링"방식 이용

### 입출력 제어기 사용
![Untitled 2](https://user-images.githubusercontent.com/52151533/121624901-5fc79380-caad-11eb-933d-66f8b91a4293.png)

입출력 제어기 : 2개의 채널(메인 버스와 입출력 버스)로 나뉨. 

- 메인버스 : 고속으로 작동하는 CPU와 메모리가 사용
- 입출력 버스 : 주변 장치가 사용

입출력 제어기를 사용하면 느린 입출력 장치로 인해 CPU의 메모리 작업이 느려지는 것을 막을 수 있어 전체 작업 효율 향상

### 입출력 버스의 분리
![Untitled 3](https://user-images.githubusercontent.com/52151533/121624912-66560b00-caad-11eb-81b5-bcba3d7fd33d.png)



입출력 제어기를 사용하면 작업 효율을 높일 수 있지만, 저속 주변장치 때문에 고속 주변장치의 데이터 전송 느려짐 

→ 고속 입출력 버스와 저속 입출력 버스 분리 

→ 두 버스 사이의 데이터 전송은 채널 선택기가 관리 

(결론) 현대의 컴퓨터는 메인 버스, 그래픽 버스, 고속 입출력 버스, 저속 입출력 버스 사용.

## 직접 메모리 접근 DMA

---

- CPU의 도움 없이 메모리에 접근할 수 있도록 입출력 제어기에 부여된 권한.
- 입출력 제어기에는 직접 메모리에 접근하기 위한 DMA 제어기가 마련됨.

### 메모리 공간 분할

CPU의 작업 공간과 DMA의 작업 공간이 겹치는 것을 방지하기 위해 공간을 분리하여 메인 메모리 운영 ⇒ 메모리 맵 입출력 memory mapped I/O

## 인터럽트

---

: 주변장치의 입출력 요구나 하드웨어의 이상 현상을 CPU에 알려주는 역할을 하는 신호

, 각 장치에 IRQ라는 고유의 인터럽트 번호 부여


|종류|특징|비고|
|------|--------------|----------|
|외부 인터럽트|입출력 및 하드웨어 관련 인터럽트|주변장치의 변화, 하드웨어 이상|
|내부 인터럽트|프로세스의 오류로 발생하는 인터럽트|예외 상황 인터럽트|
|시그널|사용자의 요청으로 발생하는 인터럽트|자발적 인터럽트|

![Untitled 4](https://user-images.githubusercontent.com/52151533/121624927-6d7d1900-caad-11eb-893f-658fe3192507.png)


인터럽트 벡터 : 여러 인터럽트 중 어떤 인터럽트가 발생했는지 파악하기 위해 사용하는 자료구조

(값이 1 : 인터럽트 발생)

인터럽트 핸들러 : 인터럽트의 처리 방법을 함수 형태로 만들어 놓은 것. 

# 02. 디스크 장치

## 디스크 장치의 종류

### 하드디스크

---

![Untitled 5](https://user-images.githubusercontent.com/52151533/121624947-7837ae00-caad-11eb-9491-66fe4991a78e.png)
- 플래터
    - 표면에 자성체가 발려 있어 자기를 이용하여 0과 1의 데이터 저장
    - N극 0, S극  1
- 섹터와 블록
    - 섹터
        - 하드디스크의 가장 작은 저장 단위
        - 하나의 섹터에는 한 덩어리의 데이터가 저장
    - 블록
        - 하드디스크와 컴퓨터 사이에 데이터를 전송하는 논리적 저장 단위 중 가장 작은 단위
        - 블록은 여러 개의 섹터로 구성되며, 윈도우 O.S에서는 블록 대신 클러스터라고 표현

    ⇒ 하드디스크 입장 : 섹터가 가장 작은 저장 단위

    ⇒ 운영체제 입장 : 블록이 가장 작은 저장 단위

- 트랙과 실린더
    - 트랙: 플래터에서 회전 축을 중심으로 데이터가 기록되는 동심원, 즉 동일한 동심원 상에 있는 섹터의 집합
    - 실린더 : 여러개의 플래터에 있는 같은 트랙의 집합
- 헤드와 플래터
    - 하드디스크에서 데이터를 읽거나 쓸 때는 읽기/ 쓰기 헤드 사용

### CD

---

- 휴대할 수 있는 소형 원반에 데이터 저장
- 하드디스크와 마찬가지로 트랙과 섹터로 구성
- 표면에 미세한 홈이 파여있어 헤드에서 발사된 레이저가 홈에 들어가 반사가 되지 않으면 0으로, 반사되어 돌아오면 1로 인식.

### 하드디스크 VS CD

---

![Untitled 6](https://user-images.githubusercontent.com/52151533/121625019-9bfaf400-caad-11eb-8585-786080dce0a0.png)
- 각속도 일정 방식
    - 하드디스크의 플래터는 항상 일정한 속도로 회전하여 바깥쪽 트랙의 속도가 안쪽 트랙의 속도보다 훨씬 빠르므로 가장 바깥쪽에 있는 섹터가 가장 안쪽에 있는 섹터보다 더 큰데, 일정한 시간 동안 이동한 각도가 같다는 의미에서 이러한 방식을 각속도 일정이라고 함
    - 트랙마다 속도가 다름 → 섹터의 크기도 다름
- 선속도 일정 방식
    - CD에서 이용
    - 어느 트랙에서나 단위시간당 디스크의 이동 거리가 같은데 이를 구현하려면 헤드가 안쪽 트랙에 있을 때는 디스크의 회전 속도를 빠르게 하고, 헤드가 바깥쪽 트랙으로 이동했을 때는 디스크의 회전 속도를 느리게 해야  함.
    - 모든 트랙의 움직이는 속도도 같고 섹터의 크기도 같아서 안쪽 트랙보다 바깥쪽 트랙에 더 많은 섹터가 존재

## 디스크 장치의 데이터 전송시간

---

- 탐색시간 : 헤드가 현재 위치에서 그 트랙까지 이동하는 데 걸리는 시간
- 회전지연시간 : 원하는 섹터를 만날 때까지 회전하는 데 걸리는 시간
- 전송시간 : 데이터 전송에 걸리는 시간

$$데이터 전송 시간 = 탐색시간 + 회전 지연 시간 + 전송시간$$

**하드디스크의 성능을 높이려면 탐색 시간 최소화해야 함!! → 디스크 스케줄링 기법 사용**

## 디스크장치관리

---

- 파티션
    - 디스크를 논리적으로 분할하는 작업
    - 대용량 하드스크의 경우 하나로 사용하기보다 여러 개로 나누어 사용하면 관리하기 편함
    - 마운트
        - 여러개의 하드디스크를 하나의 파티션으로 통합하는 기능 in 유닉스 운영체제
- 포매팅
    - 디스크에 파일 시스템을 탑재하고 디스크 표면을 초기화하여 사용할 수 있는 형태
    - 빠른 포매팅 vs 느린 포매팅

        빠른 포매팅 : 데이터는 그대로 둔 채 파일 테이블을 초기화하는 방식

        느린 포매팅 : 디스크에 파일 시스템을 탑재하고 디스크 표면을 초기화하는 방식

- 조각모음
    - 하드디스크에 조각이 많이 생기면 큰 파일이 여러 조각으로 나뉘어 저장되고 이를 읽기 위해 하드디스크의 여러 곳을 돌아다녀야 하기 때문에 성능 저하로 이어짐

## 네트워크 저장장치

---

- DAS
    - **서버**와 같은 컴퓨터에 **직접** **연결**된 저장장치를 사용하는 방식
    - = HAS
    - 단점 : 컴퓨터에 직접 연결된 저장장치를 사용하기 때문에 다른 운영체제가 쓰는 파일  시스템 사용할 수 없음.
- NAS
    - 기존의 저장장치를 **LAN이나 WAN**에 붙여서 사용하는 방식
    - 저장장치를 네트워크상에 두고 여러 클라이언트가 네트워크를 통해 접근하게 함으로써 공유 데이터 관리 및 데이터의 중복 회피 가능
- SAN
    - 데이터 서버, 백업 서버, RAID 등의 장치를 **네트워크**로 묶고 **데이터 접근을 위한 서버**를 두는 형태
    - 시스템이 제공하는 인터페이스를 통해 데이터에 접근
    - 저장장치에 필요한 장치를 네트워크로 묶어 하나의 시스템을 구성 → 다양한 서비스 제공
    - 데이터의 공유, 백업, 보안 등이 서버를 통해 자동으로 이루어짐

   
