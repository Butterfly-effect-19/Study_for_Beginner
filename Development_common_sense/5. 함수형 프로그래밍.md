# 함수형 프로그래밍

### 최근의 프로그래밍 패러다임(어떻게 작성할 지를 결정하는 프로그래밍의 관점)

---

1. `명령형 프로그래밍` : 어떻게(How) 할 것 인지를 설명하는 방식
    - 절차 지향 프로그래밍 : 수행되어야 할 순차적인 처리 과정을 포함하는 방식(C, C++)
    - 객체 지향 프로그래밍 : 객체들의 집합으로 프로그램의 상호작용을 표현 (C++, Java, C#)

  2. `선언형 프로그래밍` : 무엇(What)을 할 것 인지를 설명하는 방식

- 함수형 프로그래밍 : 순수 함수를 조합하고 소프트웨어를 만드는 방식 (클로저, 하스켈, 리스프)

### 함수형 프로그래밍의 등장

---

명령형 프로그래밍을 기반으로 개발했던 개발자들은 개발하는 소프트웨어의 크기가 커짐에 따라, 복잡하게 엉켜있는 스파게티 코드를 유지 보수하는 것이  매우 힘들다는 것을 깨닫게 되었다. 그리고 이를 해결하기 위해 함수형 프로그래밍이라는 프로그래밍 패러다임에 관심을 갖게 되었다. 함수형 프로그래밍은 거의 모든 것을 순수 함수로 나누어 문제를 해결하는 기법으로, 작은 문제를 해결하기 위한 함수를 작성하여 가독성을 높이고 유지 보수를 용이하게 해준다.

### 함수형 프로그래밍 예시

---

명령형 프로그래밍

```java
// 1 ~ 10 까지의 값이 i에 할당
for(int i = 1; i < 10; i++) {
	System.out.println(i);
}
```

함수형 프로그래밍

```java
process(10, print(num));
```

process 함수는 첫 번째 인자로 몇 까지 반복을 할 것인지 매개변수로 받고, 두 번째 인자로 전달 받은 값을 출력하라는 함수를 매개변수로 받고 있다. 함수형 프로그래밍은 무엇(What)에 포커스를 두는 프로그래밍이다. 그렇기 때문에 함수형 프로그래밍에서는 '출력을' 하는 함수를 파라미터로 넘길 수 있다.

명령형 프로그래밍에서는 메소드를 호출하면 상황에 따라 내부의 값이 바뀔 수 있다. 즉, 우리가 개발한 함수 내에서 선언된 변수의 메모리에 할당된 값이 바뀌는 등의 변화가 발생할 수 있다. 하지만 함수형 프로그래밍에서는 `대입문`이 없기 때문에 메모리에 한 번 할당된 값은 새로운 값으로 변할 수 없다.

자세한 예시는 [함수형 프로그래밍](https://mangkyu.tistory.com/111) 참고하기

### 함수형 프로그래밍의 특징 (변경 불가능, 1급 객체)

---

> 부수 효과가 없는 순수 함수를 1급 객체로 간주하여 파라미터로 넘기거나 반환 값으로 사용할 수 있으며, 참조 투명성을 지킬 수 있다.

여기서 `부수효과`(Side Effect)란 다음과 같은 변화 또는 변화가 발생하는 작업을 의미한다.

- 변수의 값이 변경됨
- 자료 구조를 제자리에서 수정함
- 객체의 필드값을 설정함
- 예외나 오류가 발생하며 실행이 중단됨
- 콘솔 또는 파일 I/O가 발생함

그리고 이러한 부수 효과(Side Effect)들을 제거한 함수들을 `순수 함수`(Pure Function)이라고 부르며, 함수형 프로그래밍에서 사용하는 함수는 이러한 순수 함수들이다.

- Memory or I/O의 관점에서 부수 효과가 없는 함수
- 함수의 실행이 외부에 영향을 끼치지 않는 함수

순수 함수(Pure Function)을 이용하면 얻을 수 있는 효과는 다음과 같다.

- 함수 자체가 독립적이며 부수 효과가 없기 때문에 Thread에 안전성을 보장 받을 수 있다.
- Thread에 안정성을 보장 받아 병렬 처리를 동기화 없이 진행할 수 있다.

그리고 `1급 객체`란 다음과 같은 것들이 가능한 객체를 의미한다.

- 변수나 데이터 구조 안에 담을 수 있다.
- 파라미터로 전달 할 수 있다.
- 반환 값으로 사용할 수 있다.
- 할당에 사용된 이름과 무관하게 고유한 구별이 가능하다.

함수형 프로그래밍에서 함수는 1급 객체로 취급 받기 때문에 위의 예제에서 본 것처럼 함수를 파라미터로 넘기는 등의 작업이 가능한 것이다. 또한 우리가 일반적으로 알고 개발했던 함수들은 함수형 프로그래밍에서 정의하는 순수 함수들과는 다르다는 것을 인지해야 한다.

마지막으로 `참조 투명성`(Referential Transparency)이란 다음과 같다.

- 동일한 인자에 대해 항상 동일한 결과를 반환해야 한다.
- 참조 투명성을 통해 기존의 값은 변경되지 않고 유지된다.(Immutable Data)

### 함수형 프로그래밍 장점

---

**대입문의 사용을 포기하면 자유로운 동시성을 얻을 수 있다.**

현재 우리는 많은 CPU를 가진 컴퓨터를 사용하고 있습니다. 그렇다고 일을 하나의 CPU에만 일을 시키지는 않죠. 어떻게 하면 컴퓨터의 모든 Cycle을 사용할 수 있을까? 많은 프로세스가 동시에 하나의 메모리 값을 변경하는 경우를 방지하기 위해서 Semaphores라는 기술을 사용했지만 함수형 프로그래밍은 더 이상 기술을 사용하지 않아도 됩니다.

즉 병렬 처리에 대해 안전하고 빠르게 처리할 수 있습니다.

### 함수형 프로그래밍 단점

---

- 기본적으로 추상화 단계가 지나치게 높아져서 코드를 읽기(reading) 어려움
- 기본의 자료구조를 상당히 바꿔야 한다는 부담이 있음
- 함수형 언어의 장점인 병렬/분산 프로그래밍 또한 실제로는 기존 명령형 언어들의 기능을 가지고도 충분히 구현 가능

### 🔗 출처

[함수형 프로그래밍](https://mangkyu.tistory.com/111)

[함수형 프로그래밍이란?](https://nesoy.github.io/articles/2018-05/Functional-Programming)