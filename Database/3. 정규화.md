## 이상현상 anomaly

:  데이터베이스 내 테이블 조작 시 발생하는 데이터 불일치 현상. 

- [삽입이상] 불필요하게 NULL 값 입력할 때
- [삭제이상] 연쇄삭제 현상(필요한 데이터까지 함께 삭제해야하는 상황)이 나타날 때
- [수정이상] 반복된 데이터 중 일부를 수정할 때.

데이터베이스의 일관성을 훼손, 데이터 무결성을 깨뜨린다. 

## 정규화

: 이상현상이 발생하는 테이블을 수정하여 정상으로 만드는 과정 → 함수의 종속성을 분석하여 테이블을 단계적으로 분해해야한다.  정규화 과정을 거치게 되면 정규형을 만족하게 된다. 

정규화에는 3가지의 원칙이 있다.

**1. 정보의 무손실** : 분해된 릴레이션이 표현하는 정보는 분해되기 전의 정보를 모두 포함해야 한다.

**2. 최소 데이터 중복** : 이상 현상을 제거, 데이터 중복을 최소화

**3. 분리의 원칙** : 하나의 독립된 관계성은 하나의 독립된 릴레이션으로 분리해서 표현

### 함수 종속성

: 어떤 테이블의 속성 A와 B에 대해, A값에 의해 B값이 유일하게 정해지는 관계를 말한다. 

B는 A에 함수 종속이다라고 말하며 A → B의 기호로 표현한다. 

## 정규형

정규형이란 특정 조건을 만족하는 릴레이션의 스키마의 형태를 말하며 제 1 정규형, 제 2 정규형, 제 3 정규형,BCNF 등이 존재한다.

<aside>
❓ 스키마: 데이터베이스에서 자료의 구조, 자료의 표현방법, 자료 간의 관계를 형식 언어로 정의한 구조

</aside>

대부분의 릴레이션은 BCNF까지 정규화하면 실제적인 이상현상이 없어진다.

### 제 1 정규형

: 릴레이션의 모든 속성값은 원자값이어야한다. 

### 제 2 정규형

: 릴레이션이 제 1 정규형을 만족하고, 기본키가 아닌 속성이 기본키에 완전함수종속이어야 한다. 

즉, 기본키가 복합키 일 때 기본키 중 일부가 다른 속성에 부분적으로 종속되어있지 않아야 한다.

### 제 3 정규형

: 기본키를 제외한 속성들이 이행적으로 종속되어있지 않아야한다. 

<aside>
❓ 이행적 함수 종속 : A → B, B→C 일 때 추론될 수 있는 A→C의 종속관계.

</aside>

### BCNF

: 릴레이션이 3차 정규형을 만족하면서 모든 결정자가 후보키 집합에 속한 정규형이다.

즉, 제3 정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것이다.


![database](https://github.com/Butterfly-effect-19/Study_for_Beginner/blob/main/image/d1.png)

특강수강 테이블에서 기본키는 (학생번호, 특강이름)이다. 그리고 기본키 (학생번호, 특강이름)는 교수를 결정하고 있다. 또한 여기서 교수는 특강이름을 결정하고 있다.

하지만, 교수가 특강이름을 결정하는 결정자이지만, 후보키가 아니다.

따라서 BCNF를 만족하려면 특강신청 테이블과 특강교수 테이블로 분해할 수 있다. 


![database](https://github.com/Butterfly-effect-19/Study_for_Beginner/blob/main/image/d2.png)

각 정규형은 선행 정규형을 항상 만족해야한다. 

수많은 정규형이 있지만 관계 데이터베이스 설계의 목표는 각 릴레이션이 3NF(or BCNF)를 갖게 하는 것이다.